<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="/favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Frontend Fails</title><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/base16/gruvbox-light-medium.min.css" integrity="sha512-YOLBTZnIcnB3qm7sPFlGHx0no3yEGWvVTAI9uA6uaZGUBQui/DP9vh0FLmCJbOL5TxHJWwaiI23cCEJsmIeMew==" crossorigin="anonymous" referrerpolicy="no-referrer" data-svelte="svelte-8dvywl"><script src="https://use.fontawesome.com/c5d5ee5034.js" data-svelte="svelte-zlrjvv"></script>

		

		<link rel="modulepreload" href="/_app/start-23268b5c.js">
		<link rel="modulepreload" href="/_app/chunks/vendor-5b6c161e.js">
		<link rel="modulepreload" href="/_app/pages/__layout.svelte-c5491adc.js">
		<link rel="modulepreload" href="/_app/pages/[slug].svelte-ef0ff377.js">
		<link rel="modulepreload" href="/_app/chunks/BlogShow-4299f9c2.js">
		<link rel="stylesheet" href="/_app/assets/start-464e9d0a.css">
		<link rel="stylesheet" href="/_app/assets/pages/__layout.svelte-d2076e52.css">

		<script type="module">
			import { start } from "/_app/start-23268b5c.js";
			start({
				target: document.querySelector("#svelte"),
				paths: {"base":"","assets":""},
				session: {},
				host: location.host,
				route: true,
				spa: false,
				trailing_slash: "never",
				hydrate: {
					status: 200,
					error: null,
					nodes: [
						import("/_app/pages/__layout.svelte-c5491adc.js"),
						import("/_app/pages/[slug].svelte-ef0ff377.js")
					],
					page: {
						host: location.host, // TODO this is redundant
						path: "/2021-02-02-frontend_explanation",
						query: new URLSearchParams(""),
						params: {"slug":"2021-02-02-frontend_explanation"}
					}
				}
			});
		</script>
	</head>
	<body>
		<div id="svelte">





<div id="sidebar" class="md:h-full md:w-60 md:fixed bg-red-300 text-white duration-300 text-center text-sm svelte-1s2ctn1"><div id="items" class="md:pt-40 grid text-center"><a href="/" class="font-bold text-6xl font-serif hover:underline text-white">Arogya Dahal</a>
		<span class="font-extralight p-5 text-white">Welcome to my blog!</span>
		<a href="/" class="font-normal p-1 text-xl text-white hover:text-2xl duration-300">Home</a>
		<a href="/about" class="font-normal md:pb-1 text-xl text-white hover:text-2xl duration-300">About</a>
		<a href="/blogs" class="font-normal text-xl text-white hover:text-2xl duration-300">Blogs</a></div>
	<a href="https://github.com/arogyad/" target="_blank"><i class="fa fa-github fa-2x hover:text-4xl text-white duration-200 ml-3"></i></a>
	<a href="https://instagram.com/arogyad/" target="_blank"><i class="fa fa-instagram fa-2x hover:text-4xl text-white duration-200 m-4"></i></a>
</div>
<button class="float-right">a</button>


<div id="blog" class="md:pl-72 md:pr-10 md:pt-10 p-10 md:text-justify"><h1 class="md:">Frontend Fails</h1>
	<span class="font-light">2021-02-02</span>
	<!-- HTML_TAG_START --><p>It&#39;s a bummer that I cannot show you live how the webapp works, I am trying to host this webapp on <a href='https://www.heroku.com' target='_blank'>heroku</a> and if it works I will update the blog. In the mean while  let me tell you how the dull looking frontend was made.</p>
<div class = 'message'>
  You can test the webapp <a href='https://arogyad.herokuapp.com/' target='_blank'>here</a>. I would like to warn you that the website is very slow(Heroku's free tier websites are very slow), thus the answers provided by the webapp are mostly wrong and I would like to apologize for that. I have made a small gif of the webapp doing what it is supposed to do, you can see it <a href='https://github.com/arogyad/Somewayofdoingmaths' target='_blank'> here </a>.
</div>

<h1 id="the-canvas">The Canvas</h1>
<p>The canvas is where we draw/write the mathematical operations; all the processes begin here. Honestly, this is the only part of the frontend, everything else on the screen are just helper functions. Let&#39;s start by defining the canvas, you can define a canvas with an id of <code>canvas</code> in html in this way:</p>
<pre><code class="hljs language-js">&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;field&quot;</span>&gt;
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;canvas&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span></span>
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tools&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;clear_canvas()&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;button&quot;</span>&gt;</span>Clear<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/div&gt;
</code></pre>
<p>The <code>clear_canvas</code> function clears the canvas (are you surprised?). The html part of boring, so let&#39;s move on to the JavaScript part.
The entire JavaScript part is pretty long, so I will be talking about the key components only. Coding in JavaScript was hands down the trickiest part, all those semi-colons and commas. First I made this canvas drawable which was pretty smooth, there were great tutorials online on how to make a canvas element drawable and I was able to make my canvas do just that quickly; adding that <code>clear_canvas</code> was easy as well. There were some hiccups here and there but they were not major problems. The hardest part was making the canvas capture the image drawn on it and sending it to the backend.</p>
<div class = 'message'>
I don't know much JavaScript so these codes look awful. If you are someone who understands JavaScript and would like to help me out of pity, please contact me <a href='mailto:arogyadahal20@gmail.com' target='_blank'>here</a>. Thank you! 
</div>

<p>The approach I took was to record the movement of the mouse on the canvas, which was not so complex as JavaScript is nice enough to grant us with <code>EventListeners</code>. So I created two empty arrays one for the X position of the mouse and another one for the Y position of the mouse (inside the canvas). These arrays are then sent to the main function i.e. the <code>image_create</code> function, this function takes the minimum values of X array and Y array and creates the square image starting from this (x - 10, y - 10) position (the position is relative to the canvas i.e. (0,0) is the top left corner of the canvas) of size bx, the maximum between the X position and Y position, and sends it to python backend. This process of creating the image was the hardest part. So what I did was, in the <code>image_create</code> function I created a second canvas on top of the original one which is of size <strong>bx</strong> (I will tell you why I needed to do this in a while). Then I created the clipping of the drawing of the canvas of size <strong>bx</strong> and placed it in the top left corner of the new canvas. Since both the canvas and the drawing are of the same size I can convert the new canvas directly into a base64 encoded image and send it via a POST request to the backend. This sounds pretty easy and it is pretty easy, but I had such a hard time finding this out I was about to scrap this project. So yeah this is basically the frontend, I don&#39;t think anyone will read this far but if you did then, thanks.</p>
<!-- HTML_TAG_END -->
	<div id="pad" class="pt-8"><div id="next" class="flex pt-2 border-t-2"><div id="pr" class="w-2/4 flex-1 hover:text-green-800"><i class="fa fa-caret-left fa-sm"></i>
			<a href="/2021-01-27-some_way_of_doing_maths" class="text-xl font-light">Some way of doing Maths <span class="font-light text-sm">[2021-01-27]</span></a></div>
	<div id="nxt" class="w-2/4 hover:text-red-800 text-right"><a href="/2021-02-04-backend_blackbox" class="text-xl font-light">Backend Blackbox <span class="font-light text-sm">[2021-02-04]</span></a>
			<i class="fa fa-caret-right fa-sm"></i></div></div></div></div>



			<script type="application/json" data-type="svelte-data" data-url="/2021-02-02-frontend_explanation.json">{"status":200,"statusText":"","headers":{"content-type":"application/json; charset=utf-8"},"body":"{\"content\":{\"out\":{\"attributes\":{\"title\":\"Frontend Fails\",\"date\":\"2021-02-02\"},\"body\":\"\u003Cp\u003EIt&#39;s a bummer that I cannot show you live how the webapp works, I am trying to host this webapp on \u003Ca href='https:\u002F\u002Fwww.heroku.com' target='_blank'\u003Eheroku\u003C\u002Fa\u003E and if it works I will update the blog. In the mean while  let me tell you how the dull looking frontend was made.\u003C\u002Fp\u003E\\n\u003Cdiv class = 'message'\u003E\\n  You can test the webapp \u003Ca href='https:\u002F\u002Farogyad.herokuapp.com\u002F' target='_blank'\u003Ehere\u003C\u002Fa\u003E. I would like to warn you that the website is very slow(Heroku's free tier websites are very slow), thus the answers provided by the webapp are mostly wrong and I would like to apologize for that. I have made a small gif of the webapp doing what it is supposed to do, you can see it \u003Ca href='https:\u002F\u002Fgithub.com\u002Farogyad\u002FSomewayofdoingmaths' target='_blank'\u003E here \u003C\u002Fa\u003E.\\n\u003C\u002Fdiv\u003E\\n\\n\u003Ch1 id=\\\"the-canvas\\\"\u003EThe Canvas\u003C\u002Fh1\u003E\\n\u003Cp\u003EThe canvas is where we draw\u002Fwrite the mathematical operations; all the processes begin here. Honestly, this is the only part of the frontend, everything else on the screen are just helper functions. Let&#39;s start by defining the canvas, you can define a canvas with an id of \u003Ccode\u003Ecanvas\u003C\u002Fcode\u003E in html in this way:\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"hljs language-js\\\"\u003E&lt;div \u003Cspan class=\\\"hljs-keyword\\\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;field&quot;\u003C\u002Fspan\u003E&gt;\\n    \u003Cspan class=\\\"language-xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ecanvas\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Eid\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;canvas&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ecanvas\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"language-xml\\\"\u003E\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;tools&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n        \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Eonclick\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;clear_canvas()&quot;\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Etype\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;button&quot;\u003C\u002Fspan\u003E \u003Cspan class=\\\"hljs-attr\\\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\\\"hljs-string\\\"\u003E&quot;button&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003EClear\u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ebutton\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\\n    \u003Cspan class=\\\"hljs-tag\\\"\u003E&lt;\u002F\u003Cspan class=\\\"hljs-name\\\"\u003Ediv\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\\n&lt;\u002Fdiv&gt;\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cp\u003EThe \u003Ccode\u003Eclear_canvas\u003C\u002Fcode\u003E function clears the canvas (are you surprised?). The html part of boring, so let&#39;s move on to the JavaScript part.\\nThe entire JavaScript part is pretty long, so I will be talking about the key components only. Coding in JavaScript was hands down the trickiest part, all those semi-colons and commas. First I made this canvas drawable which was pretty smooth, there were great tutorials online on how to make a canvas element drawable and I was able to make my canvas do just that quickly; adding that \u003Ccode\u003Eclear_canvas\u003C\u002Fcode\u003E was easy as well. There were some hiccups here and there but they were not major problems. The hardest part was making the canvas capture the image drawn on it and sending it to the backend.\u003C\u002Fp\u003E\\n\u003Cdiv class = 'message'\u003E\\nI don't know much JavaScript so these codes look awful. If you are someone who understands JavaScript and would like to help me out of pity, please contact me \u003Ca href='mailto:arogyadahal20@gmail.com' target='_blank'\u003Ehere\u003C\u002Fa\u003E. Thank you! \\n\u003C\u002Fdiv\u003E\\n\\n\u003Cp\u003EThe approach I took was to record the movement of the mouse on the canvas, which was not so complex as JavaScript is nice enough to grant us with \u003Ccode\u003EEventListeners\u003C\u002Fcode\u003E. So I created two empty arrays one for the X position of the mouse and another one for the Y position of the mouse (inside the canvas). These arrays are then sent to the main function i.e. the \u003Ccode\u003Eimage_create\u003C\u002Fcode\u003E function, this function takes the minimum values of X array and Y array and creates the square image starting from this (x - 10, y - 10) position (the position is relative to the canvas i.e. (0,0) is the top left corner of the canvas) of size bx, the maximum between the X position and Y position, and sends it to python backend. This process of creating the image was the hardest part. So what I did was, in the \u003Ccode\u003Eimage_create\u003C\u002Fcode\u003E function I created a second canvas on top of the original one which is of size \u003Cstrong\u003Ebx\u003C\u002Fstrong\u003E (I will tell you why I needed to do this in a while). Then I created the clipping of the drawing of the canvas of size \u003Cstrong\u003Ebx\u003C\u002Fstrong\u003E and placed it in the top left corner of the new canvas. Since both the canvas and the drawing are of the same size I can convert the new canvas directly into a base64 encoded image and send it via a POST request to the backend. This sounds pretty easy and it is pretty easy, but I had such a hard time finding this out I was about to scrap this project. So yeah this is basically the frontend, I don&#39;t think anyone will read this far but if you did then, thanks.\u003C\u002Fp\u003E\\n\",\"bodyBegin\":6,\"frontmatter\":\"title: Frontend Fails\\ndate: 2021-02-02\"},\"prev\":{\"link\":\"2021-01-27-some_way_of_doing_maths\",\"blog\":{\"date\":\"2021-01-27\",\"title\":\"Some way of doing Maths\"}},\"next\":{\"link\":\"2021-02-04-backend_blackbox\",\"blog\":{\"date\":\"2021-02-04\",\"title\":\"Backend Blackbox\"}}}}"}</script>
		</div>
	</body>
</html>
